#!/usr/bin/env bash
# List all skills and commands from current project
# Output: path|type|name (one per line)

set -e

# Find project root by walking up from PWD
check_dir="$PWD"
project_root=""
while [ "$check_dir" != "/" ]; do
  if [ -d "$check_dir/.claude" ]; then
    project_root="$check_dir"
    break
  fi
  check_dir="$(dirname "$check_dir")"
done

[ -z "$project_root" ] && exit 0

bin_dir="$(cd "$(dirname "$0")/.." && pwd)"
"$bin_dir/scan-skills" "$project_root/.claude/skills"
"$bin_dir/scan-commands" "$project_root/.claude/commands"
